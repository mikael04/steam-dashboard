---
title: "Analise Exploratoria"
author: "Mikael M Coletto"
format: html
editor: source
execute: 
  cache: FALSE
---

```{r, setup, include=FALSE}
knitr::opts_knit$set(root.dir = '/mnt/Netac-Dados/Projetos/R/steam-dashboard',
                     cache.lazy = FALSE)
path_quarto <- "../../"
source(paste0(path_quarto, "R/fct_order_strings.R"))
```

# Análise dos dados da Steam

## Objetivo

A ideia desta análise é ilustrar os conhecimentos adquiridos em R, passando pelos pontos de análise exploratória, construção de um dashboard para visualização de dados e por fim trabalhar com modelos de predição para alguns possíveis problemas da indústria.

## Primeiro problema

Somos um estúdio de jogos e queremos analisar qual gênero/categoria de jogo tem mais sucesso na steam, mais público e melhores avaliações, também queremos analisar qual faixa de preço é mais interessante para o lançamento desse novo jogo.

### Primeiro passo - Análise exploratória

Inicialmente iremos fazer uma análise exploratória de algumas bases de dados e suas variáveis que podem ser interessantes para determinar sucesso de um jogo, a faixa de preço, a quantidade de vendas e relacionar essas questões aos gêneros e categorias. Foram feitas análises de três bases de dados, a primeira mais completa, e as duas seguintes mais focadas em reviews de usuários.

#### Base de dados - 1

```{r, child="docs/Analise/capitulos/analise-base-1.qmd"}
```

#### Base de dados - 2

```{r, child="docs/Analise/capitulos/analise-base-2.qmd"}
```

#### Base de dados - 3

```{r, child="docs/Analise/capitulos/analise-base-3.qmd"}
```

#### Diferenças entre base 1 e 3

```{r, child="docs/Analise/capitulos/dif-entre-bases.qmd"}
```

#### Unindo as bases

```{r, child="docs/Analise/capitulos/unindo-bases.qmd"}
```

### Analisando dados dos jogos

Agora que já uni as duas bases, e tenho uma quantidade mais razoável de jogos a serem analisados, precisarei definir qual será a forma de avaliar os estilos/gêneros/categorias dos jogos, por ser uma coluna presente em ambas as bases, a variável `tags` é uma ótima candidata, porém ela apresenta um número de possibilidades bastante grande e distinta, o que poderia ser prejudicial à análise. Já as outras variáveis `categories` e `genres` que são mais específicas, não estão presentes em aproximadamente 20% da base de dados. A análise será feita inicialmente nas três para posterior decisão de qual ou quais usar.

#### Categorias

```{r, categs-count}
df_all_games |> 
  dplyr::filter(!(is.na(categories)) & categories != "") |> 
  nrow()
```

Ou seja, temos aproximadamente 20% da base de dados sem nenhuma informação de categorias, a variável poderia ser utilizada, porém com algumas ressalvas.

#### Gêneros

```{r, genres-count}
df_all_games |> 
  dplyr::filter(!(is.na(genres)) & genres != "") |> 
  nrow()
```

Novamente, cerca de 20% da base sem informações de gênero.

#### Categorias e Gênero

```{r, categs-genres-count}
df_all_games |> 
  dplyr::filter(!(is.na(categories)) & categories != "") |> 
  dplyr::filter(!(is.na(genres)) & genres != "") |> 
  nrow()
```

E, para efeito de comparação, podemos ver que os valores sem categorias e gênero são as mesmas observações, o que faz bastante sentido já que foram unidas e uma das duas bases não possuía essas colunas.

#### Tags

```{r, tags-count}
df_all_games |> 
  dplyr::filter(!(is.na(tags)) & tags != "" ||
                  (is.na(tags_extra)) & tags_extra != "") |> 
  nrow()
```

Já no caso das tags, temos todas as observações com tags ou tags_extra (o que também faz sentido, já que unimos duas bases diferentes e uma delas possuia a coluna tags e a outra tags_extra).

Portanto, faremos uma análise mais aprofundada para gerar uma única coluna que possa ser analisada.

```{r, child="docs/Analise/capitulos/tags.qmd"}
```

#### Investigando preços

Vamos agora nos debruçar sobre as faixas de preços e em seguida faremos um cruzamento dos dados de preços e tags.

```{r, child="docs/Analise/capitulos/price-tags.qmd"}
```

